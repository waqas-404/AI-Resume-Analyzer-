{% extends 'analyzer/base.html' %}

{% block title %}Analysis History - AI Resume Analyzer{% endblock %}

{% block extra_css %}
<style>
    .history-item {
        background: rgba(26, 35, 50, 0.6);
        border: 1px solid rgba(102, 126, 234, 0.2);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 16px;
        transition: all 0.3s ease;
    }

    .history-item:hover {
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
    }

    .history-score {
        font-size: 32px;
        font-weight: 800;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .history-date {
        color: #6b7280;
        font-size: 14px;
    }

    .view-btn {
        background: rgba(102, 126, 234, 0.2);
        color: #667eea;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        display: inline-block;
        transition: all 0.3s ease;
        border: 1px solid rgba(102, 126, 234, 0.3);
    }

    .view-btn:hover {
        background: rgba(102, 126, 234, 0.3);
        transform: scale(1.05);
    }
</style>
{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="hero-title">ðŸ“œ Analysis History</div>
    <div class="hero-subtitle">
        Review your past resume analyses
    </div>
</div>

<div class="card">
    {% if analyses %}
        {% for analysis in analyses %}
        <div class="history-item">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div class="history-score">{{ analysis.similarity_score|floatformat:1 }}%</div>
                    <div class="history-date">
                        {{ analysis.created_at|date:"F d, Y - g:i A" }}
                    </div>
                </div>
                <div>
                    <a href="{% url 'results' analysis.pk %}" class="view-btn">
                        View Details â†’
                    </a>
                </div>
            </div>
            
            {% if analysis.missing_keywords %}
            <div style="margin-top: 12px; color: #a0aec0; font-size: 14px;">
                Missing {{ analysis.missing_keywords|length }} keyword{{ analysis.missing_keywords|length|pluralize }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <div style="text-align: center; padding: 40px; color: #6b7280;">
            <div style="font-size: 48px; margin-bottom: 16px;">ðŸ“­</div>
            <div style="font-size: 18px;">No analysis history yet</div>
            <div style="margin-top: 8px;">Start by analyzing your first resume!</div>
        </div>
    {% endif %}
</div>

<div style="text-align: center; margin-top: 32px;">
    <a href="{% url 'home' %}" class="btn-primary" style="max-width: 300px; margin: 0 auto;">
        ðŸš€ Analyze New Resume
    </a>
</div>
{% endblock %}